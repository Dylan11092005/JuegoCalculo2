<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Snake ‚Ä¢ C√°lculo 2</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#A7D751">

  <style>
    :root {
      --bg: #f3f4f6;
      --card: #ffffff;
      --text: #111827;
      --muted: #6b7280;
      --shadow: 0 18px 55px rgba(0, 0, 0, .12);
      --radius: 22px;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: radial-gradient(1200px 800px at 50% 0%, #ffffff 0%, var(--bg) 65%);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Helvetica Neue";
      color: var(--text);
      overflow: hidden;
      touch-action: manipulation;
    }

    .app {
      height: 100%;
      display: grid;
      place-items: center;
      padding: 16px;
      box-sizing: border-box;
    }

    .card {
      width: min(520px, 94vw);
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid rgba(17, 24, 39, .08);
      overflow: hidden;
      position: relative;
    }

    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 16px;
      border-bottom: 1px solid rgba(17, 24, 39, .08);
    }

    .title {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .title b {
      font-size: 14px;
      letter-spacing: .2px;
    }

    .title span {
      font-size: 12px;
      color: var(--muted);
    }

    .pill {
      display: flex;
      gap: 10px;
      align-items: center;
      font-weight: 900;
      font-size: 13px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(17, 24, 39, .06);
    }

    #canvasWrap {
      background: #a7d751;
    }

    canvas {
      display: block;
      width: 100% !important;
      height: auto !important;
      image-rendering: pixelated;
      background: #a7d751;
    }

    .bottombar {
      display: flex;
      gap: 10px;
      justify-content: space-between;
      align-items: center;
      padding: 12px 16px;
      border-top: 1px solid rgba(17, 24, 39, .08);
    }

    .hint {
      font-size: 12px;
      color: var(--muted);
    }

    .btn {
      border: 0;
      border-radius: 14px;
      padding: 10px 12px;
      font-weight: 900;
      background: rgba(17, 24, 39, .08);
      color: var(--text);
      cursor: pointer;
    }

    .btn:active {
      transform: translateY(1px);
    }


    /* QUIZ overlay */
    #quizOverlay {
      position: fixed;
      inset: 0;
      display: none;
      place-items: center;
      background: rgba(0, 0, 0, 0.55);
      z-index: 9999;
    }

    #quizCard {
      width: min(560px, 92vw);
      background: #fff;
      border-radius: 18px;
      padding: 18px;
      box-shadow: 0 18px 55px rgba(0, 0, 0, .25);
      text-align: left;
      border: 1px solid rgba(17, 24, 39, .08);
    }

    #quizHeader {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      align-items: center;
    }

    #quizHeader h3 {
      margin: 0;
      font-size: 16px;
    }

    #quizTimer {
      font-weight: 900;
      background: rgba(17, 24, 39, .06);
      padding: 6px 10px;
      border-radius: 999px;
    }

    #quizQ {
      margin: 12px 0 10px;
    }

    #quizChoices {
      display: grid;
      gap: 10px;
    }

    #quizFeedback {
      margin: 12px 0 0;
      font-weight: 900;
    }

    #quizTip {
      margin: 8px 0 0;
      opacity: .7;
      font-size: 12px;
    }

    /* GAME OVER overlay */
    #gameOverOverlay {
      position: fixed;
      inset: 0;
      display: none;
      place-items: center;
      background: rgba(0, 0, 0, 0.55);
      z-index: 10000;
    }

    #gameOverCard {
      width: min(420px, 92vw);
      background: white;
      border-radius: 18px;
      padding: 18px;
      box-shadow: 0 18px 55px rgba(0, 0, 0, .25);
      border: 1px solid rgba(17, 24, 39, .08);
      text-align: center;
    }

    #gameOverTitle {
      font-size: 20px;
      font-weight: 900;
      margin-bottom: 6px;
    }

    #finalScore {
      color: rgba(17, 24, 39, .7);
      font-weight: 800;
      margin-bottom: 14px;
    }

    #restartBtn {
      width: 100%;
      border: 0;
      border-radius: 14px;
      padding: 12px 14px;
      font-weight: 900;
      background: rgba(17, 24, 39, 0.10);
      cursor: pointer;
      font-size: 15px;
    }

    #restartBtn:active {
      transform: translateY(1px);
    }

    #gameOverTip {
      margin-top: 10px;
      font-size: 12px;
      opacity: .7;
    }
  </style>
</head>

<!-- START SCREEN -->
<div id="startOverlay" style="
  position:fixed; inset:0; display:grid; place-items:center;
  background:rgba(0,0,0,0.55); z-index:10001;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
">
  <div style="
    width:min(520px,92vw);
    background:#fff;
    border-radius:18px;
    padding:18px;
    box-shadow:0 18px 55px rgba(0,0,0,.25);
    border:1px solid rgba(17,24,39,.08);
  ">
    <div style="display:flex; justify-content:space-between; align-items:center; gap:10px;">
      <div>
        <div style="font-size:18px; font-weight:900;">Snake ‚Ä¢ C√°lculo 2</div>
        <div style="font-size:12px; opacity:.7;">Aprende jugando</div>
      </div>
    </div>

    <div style="margin-top:14px; font-weight:900;">Reglas r√°pidas</div>
    <ul style="margin:8px 0 0; padding-left:18px; line-height:1.35; font-size:14px;">
      <li>Desliza para mover la serpiente.</li>
      <li>Al comer, aparece una pregunta de C√°lculo 2.</li>
      <li>‚úÖ Si aciertas: creces.</li>
      <li>‚ùå Si fallas: pierdes 1 segmento.</li>
      <li>Atraviesas las paredes (sales por un lado y entras por el otro).</li>
      <li>Game Over si chocas contigo mismo, te quedes sin vidas o segmentos de cola.</li>
    </ul>

    <button id="playBtn" type="button" style="
      margin-top:16px; width:100%;
      border:0; border-radius:14px;
      padding:12px 14px;
      font-weight:900; font-size:15px;
      background:rgba(17,24,39,.10);
      cursor:pointer;
    ">‚ñ∂ Jugar</button>

    <div style="margin-top:10px; font-size:12px; opacity:.7;">
      Tip: si est√°s en PC, tambi√©n puedes usar las flechas.
    </div>
  </div>
</div>


<body>
  <div class="app">
    <div class="card">
      <div class="topbar">
        <div class="title">
          <b>Snake ‚Ä¢ C√°lculo 2</b>
          <span>Come solo si respondes bien</span>
        </div>
        <div class="pill">
          <span>Score:</span> <span id="scoreUI">0</span>
        </div>
      </div>

      <div id="canvasWrap"></div>

      <div class="bottombar">
        <div class="hint">Swipe o usa el pad. Responde r√°pido.</div>
        <button class="btn" onclick="location.reload()">Recargar</button>
      </div>
    </div>
  </div>

  

  <!-- QUIZ OVERLAY -->
  <div id="quizOverlay">
    <div id="quizCard">
      <div id="quizHeader">
        <h3>Pregunta de C√°lculo 2</h3>
        <span id="quizTimer">10</span>
      </div>
      <div id="quizQ"></div>
      <div id="quizChoices"></div>
      <p id="quizFeedback"></p>
      <p id="quizTip">Tip: toca una opci√≥n o usa 1‚Äì4.</p>
    </div>
  </div>

  <!-- GAME OVER OVERLAY -->
  <div id="gameOverOverlay">
    <div id="gameOverCard">
      <div id="gameOverTitle">üíÄ Game Over</div>
      <div id="finalScore">Score: 0</div>
      <button id="restartBtn" type="button">Reiniciar</button>
      <div id="gameOverTip">Toca Reiniciar para volver a jugar.</div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.min.js"></script>
  <script src="config.js?v=4"></script>
  <script src="snake.js?v=4"></script>
  <script src="food.js?v=4"></script>
  <script src="heart.js?v=4"></script>
  <script src="quiz.js?v=4"></script>
  <script src="game.js?v=4"></script>

  
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./service-worker.js")
          .catch(err => console.log("SW error:", err));
      });
    }
  </script>

</body>

</html>